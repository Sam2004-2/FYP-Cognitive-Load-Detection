# Cognitive Load Estimation - Regression Configuration
# For training continuous load_0_1 target from StressID self-assessments

# Random seed for reproducibility
seed: 42

# Windowing parameters (must match extraction settings)
windows:
  length_s: 10.0
  step_s: 2.5

# Quality control thresholds
quality:
  min_face_conf: 0.5
  max_bad_frame_ratio: 0.05

# Blink detection parameters
blink:
  ear_thresh: 0.21
  min_blink_ms: 120
  max_blink_ms: 400

# Feature flags
features_enabled:
  tepr: false
  blinks: true
  perclos: true
  brightness: true
  geometry: true
  fix_sac: false
  gaze_entropy: false

# Task mode: "classification" or "regression"
task_mode: "regression"

# Regression model configuration
regression:
  model_type: "ridge"  # "ridge", "rf" (RandomForest), or "xgb" (XGBoost/GradientBoosting)

  # Ridge regression parameters
  ridge_params:
    alpha: 1.0  # Regularization strength

  # RandomForest parameters
  rf_params:
    n_estimators: 100
    max_depth: 10
    min_samples_leaf: 5
    n_jobs: -1

  # XGBoost/GradientBoosting parameters
  xgb_params:
    n_estimators: 100
    max_depth: 4
    learning_rate: 0.1
    min_samples_leaf: 5

# Cross-validation configuration
cv:
  method: "group_kfold"  # "group_kfold" or "loso" (leave-one-subject-out)
  n_splits: 5            # Number of folds for GroupKFold

# Session-level evaluation aggregation
session_agg:
  method: "mean"  # "mean" or "median" for aggregating window predictions

# Task filtering - only these tasks are used for training
tasks:
  - "Math"
  - "Counting1"
  - "Counting2"
  - "Speaking"

# Evaluation configuration (overrides default)
eval:
  metrics: ["mae", "rmse", "spearman", "r2"]
  report_window_level: true   # Also report window-level metrics (for debugging)
  report_session_level: true  # Primary evaluation level

# Target column for training
# Primary: "load_0_1" from self-report assessments (defensible ground truth)
# The physiological teacher model is used for independent *validation*,
# not for generating training labels.
target:
  column: "load_0_1"

# Physiological validation (independent secondary metric)
# If a physio_labels CSV is provided at training time, within-subject
# Spearman correlation between predictions and physio arousal is reported.
physio_validation:
  enabled: true
  # Path to physio_stress_labels.csv (window-level physio scores)
  labels_path: "data/processed/physio_stress_labels.csv"
